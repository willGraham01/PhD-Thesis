\section{General formula for the $M$-Matrix of a Finite, Periodic Graph} \label{sec:ScalarDiscussion}
Having obtained the quantum graph problem \eqref{eq:SingularWaveEqnQGProblem}, we turn our attention to determining the eigenvalues $z := \omega^2$.
In this section we contextualise the theory introduced in section \ref{ssec:MMatrix}, showing how it is employed for studying $\sigma\bracs{-\laplacian_{\dddmes}^{\qm}}$.
Our key result will be the provision of an explicit formula for (the entries of) the $M$-matrix in terms of the underlying (period) graph on which \eqref{eq:SingularWaveEqnQGProblem} is posed.
We will follow up on this in section \ref{sec:ScalarExamples}, where we provide some explicit examples of quantum graph problems whose spectra can be determined through the study of the $M$-matrix.

One will note that only $\alpha_j$ appears in the Wentzell condition in \eqref{eq:GraphLaplacianExample}, but $\alpha_j\omega^2$ is present on the right hand side of \eqref{eq:SingularWaveEqnQGProblem}.
As was raised in section \ref{ssec:Intro-ThinStructures}, the problem \eqref{eq:SingularWaveEqnQGProblem} belongs to the class of problems with generalised resolvents.
In section \ref{ssec:MMatrix} we introduced the $M$-matrix in a more familiar setting, with no $\omega^2$-dependence in the vertex conditions.
However the analysis of the spectrum of $-\laplacian_{\dddmes}^{\qm}$ can be carried out by replacing the matrix $B=-\alpha$ (in section \ref{ssec:MMatrix}) with $\omega^2 B$, as will be done in section \ref{ssec:MMatrixConsequences}.
Justification lies in the observation that introducing explicit $\omega^2$-dependence should not affect the (structure of) the arguments in the supporting theory\footnote{See \cite[page 1846]{cherednichenko2018effective} in reference to the results of \cite{ryzhov2009weyl} and references therein.} and consequentially similar conclusions can be drawn with this alteration to $B$.
However we highlight that a formal presentation of these arguments has not been conducted in the literature, and remains open.
If one has reservations about this ``gap" in the available theory, an alternative to analysing a problem with generalised resolvents directly is explored in \cite[Section 6]{cherednichenko2017norm}.
One could look to transform a problem with $\omega^2$-dependent $\delta$-type vertex condition (like \eqref{eq:SingularWaveEqnQGProblem}) into a problem with $\omega^2$-independent $\delta'$-type vertex conditions.
This comes at the cost of having to determine the appropriate (unitary) transform to apply to \eqref{eq:SingularWaveEqnQGProblem}, but the theory of section \ref{ssec:MMatrix} would apply to the transformed problem, could be used to analyse the spectrum, and then the inverse transform applied.

Define the (Dirichlet) map $\dmap$ as in \eqref{eq:GraphDNMapDef}.
The action of the Neumann map $\nmap$ is defined sightly differently to how it appears in \eqref{eq:GraphDNMapDef} (by virtue of our need to take a Gelfand transform), however ultimately conveys the same meaning:
\begin{align} \label{eq:GraphNMapQM}
	\bracs{\nmap u}_j = -\sum_{j\con k} \bracs{\pdiff{}{n} + \rmi\qm_{jk} }u(v_j).
\end{align}
With these definitions, the Green's identity \eqref{eq:GraphGreensIdentity} 
\begin{align*}
	\ip{ -\bracs{\diff{}{y}+\rmi\qm_{jk}}^2 u }{ v }_{L^2\bracs{\graph}} - \ip{ u }{ -\bracs{\diff{}{y}+\rmi\qm_{jk}}^2 v }_{L^2\bracs{\graph}}
	&= \ip{\nmap u}{\dmap v}_{\complex^{\abs{\vertSet}}} - \ip{\dmap u}{\nmap v}_{\complex^{\abs{\vertSet}}},
\end{align*}
holds, and the map $u\mapsto\bracs{\dmap u, \nmap u}$ is clearly surjective onto $\complex^{\abs{\vertSet}}\times\complex^{\abs{\vertSet}}$.
As such, we can define the $M$-matrix for the problem \eqref{eq:SingularWaveEqnQGProblem} in the manner described in section \ref{ssec:MMatrix}, and in particular know that $\omega^2$ is an eigenvalue of $-\laplacian_{\qm}^{\dddmes}$ whenever $M\bracs{\omega^2}-\omega^2 B$ possesses a zero eigenvalue.
In the abstract, this is not particularly helpful for explicitly determining the eigenvalues --- however the nature of the problem \eqref{eq:SingularWaveEqnQGProblem} allows us to compute the entries of $M\bracs{\omega^2}$ explicitly.

\subsection{General formula for the $M$-matrix} \label{ssec:MMatrixResult}
The relatively simple nature of the structure provided by the metric graph $\graph$, and the action on each edge of the graph, allows us to explicitly compute the entries of the $M$-matrix.
The proposition we present allows for $\graph$ to possess looping edges, although this is largely for completeness because we will want to introduce \emph{artificial vertices} (section \ref{ssec:ArtificialVertices}) to break these loops.
The following proposition provides the entries of the $M$-matrix.
\begin{prop}[$M$-matrix entries] \label{prop:M-MatrixEntries}
	Let $\graph=\bracs{\vertSet,\edgeSet}$ be an embedded graph on which the problem \eqref{eq:SingularWaveEqnQGProblem} is posed.
	Suppose that $\dmap u = e_k$ where $e_k$ is the $k$\textsuperscript{th} canonical unit vector in $\complex^{\abs{\vertSet}}$.
	Then the $j$\textsuperscript{th} entry of $\nmap u$, and hence the $jk$\textsuperscript{th} entry in the $M$-matrix, is given by
	\begin{align*}
		\bracs{\nmap u}_j &= 
		\begin{cases}
			0,	
			& j \not\con k, \\[5pt]
			\sum_{j\conLeft k} \omega \e^{\rmi\qm_{jk}l_{jk}} \csc\bracs{l_{jk}\omega} 
			+ \sum_{j\conRight k} \omega \e^{-\rmi\qm_{kj}l_{kj}} \csc\bracs{l_{kj}\omega},
			& j\neq k, \ j\con k, \\[5pt]
			- \sum_{\substack{j\con l \\ j\neq l}} \omega\cot\bracs{l_{jl}\omega}
			- 2\omega\sum_{j\conLeft j} \clbracs{ \cot\bracs{l_{jj}\omega} - \cos\bracs{\qm_{jj}l_{jj}}\csc\bracs{l_{jj}\omega} },
			& j=k.
		\end{cases}
	\end{align*}
\end{prop}
Note the choice of $j\conLeft j$ in the contributions from loops is simply a convention, $j\conRight j$ is equivalent here.
Also recall the convention for summing over $j\con k$:
\begin{align*}
	\sum_{j\con k} \omega\cot\bracs{l_{jk}\omega} &= \sum_{j\conLeft k} \omega\cot\bracs{l_{jk}\omega}	+ \sum_{j\conRight k} \omega\cot\bracs{l_{kj}\omega}
\end{align*}
\begin{proof}
	The proof below is an explicit computation, similar to that in \cite{ershova2014isospectrality} with adjustments for the dependence on $\qm$.
	
	We first write the general form of the edge solution $u^{(jk)}$ from \eqref{eq:SingularWaveEqnQGProblem-1}:
	\begin{align} \label{eq:EdgeEqnGeneralSolution}
		u^{(jk)} &= \e^{-\rmi\qm_{jk}y}\bracs{ C_{+}^{(jk)}\e^{-\rmi\omega y} + C_{-}^{(jk)}\e^{\rmi\omega y} },
		\quad C_{+}^{(jk)}, C_{-}^{(jk)}\in\complex.
	\end{align}
	Since the $M$-matrix maps $\complex^{\abs{\vertSet}}$ to $\complex^{\abs{\vertSet}}$, it is sufficient to determine its action on the canonical basis of $\complex^{\abs{\vertSet}}$.
	So for each fixed $k\in\clbracs{1,...,\abs{\vertSet}}$ we set $\dmap u = e_k$.
	This provides us with sufficient Dirichlet data to solve \eqref{eq:SingularWaveEqnQGProblem-1} on each edge and eliminate the constants $C_{+}^{(jk)}$, $C_{-}^{(jk)}$ in \eqref{eq:EdgeEqnGeneralSolution}, obtaining
	\begin{align*}
		j\not\con k &\implies
		\begin{cases}
			u_{jk}(x) = 0, \\
			u_{kj}(x) = 0,
		\end{cases} \\
		j\neq k, \ j\con k &\implies
		\begin{cases}
			u_{jk}(x) = \e^{-\rmi\qm_{jk}\bracs{x-l_{jk}}}\csc\bracs{\omega l_{jk}}\sin\bracs{\omega x}, \\
			u_{kj}(x) = \e^{-\rmi\qm_{kj}x}\csc\bracs{\omega l_{kj}}\sin\bracs{\omega \bracs{l_{kj}-x}},
		\end{cases} \\
		j = k &\implies 
		\begin{cases}
			u_{jj}(t) = \e^{-\rmi\qm_{jj}x} \bracs{ \e^{-\rmi\omega x} + \sqbracs{\e^{\rmi\qm_{jj}l_{jj}}-\e^{-\rmi\omega l_{jj}}}\csc\bracs{\omega l_{jj}}\sin\bracs{\omega x}  },
		\end{cases}
	\end{align*}
	This in turn enables us to explicitly differentiate the expressions for $u_{jk}$, and read off the values of $\bracs{\pdiff{}{n}+\rmi\qm_{jk}}u_{jk}$ at the vertices.
	In the case $j\not\con k$, we obviously get zero contribution from the edges $I_{jk}$ and $I_{kj}$.
	The case $j\neq k, \ j\con k$, yields the following contributions from the edges $I_{jk}$ and $I_{kj}$:
	\begin{align*}
		\bracs{\pdiff{}{n}+\rmi\qm_{jk}}u^{(jk)}\bracs{v_j} = -\omega \e^{\rmi\qm_{jk}l_{jk}}\csc\bracs{\omega l_{jk}}, 
		&\qquad \bracs{\pdiff{}{n}+\rmi\qm_{jk}}u^{(jk)}\bracs{v_k} = \omega\cot\bracs{\omega l_{jk}}, \\
		\bracs{\pdiff{}{n}+\rmi\qm_{kj}}u^{(kj)}\bracs{v_j} = -\omega \e^{-\rmi\qm_{kj}l_{kj}}\csc\bracs{\omega l_{kj}}, 
		&\qquad \bracs{\pdiff{}{n}+\rmi\qm_{kj}}u^{(kj)}\bracs{v_k} = \omega\cot\bracs{\omega l_{kj}}.
	\end{align*}
	Finally, when considering the case $j=k$, the contribution to $\bracs{\nmap u}_j$ from loops $I_{jj}$ in the graph also requires us to compute
	\begin{align*}
		-\lim_{x\rightarrow0}\bracs{\bracs{u^{(jj)}}'+i\qm_{jj}u^{(jj)}}(x) + \lim_{x\rightarrow l_{jj}} & \bracs{\bracs{u^{(jj)}}'+i\qm_{jj}u^{(jj)}}(x) \\
		&\qquad = 2\omega\bigl( \cot\bracs{\omega l_{jj}} - \cos\bracs{\qm_{jj}l_{jj}}\csc\bracs{\omega l_{jj}} \bigr).	
	\end{align*}
	We then use the formula \eqref{eq:GraphNMapQM} to obtain the desired result for $\bracs{\nmap u}_j$.
	Since $M(\dmap u) = \nmap u$, and the $e_k$ are a basis for $\complex^{\abs{V}}$, we have also deduced the $k^{\text{th}}$ column of the $M$-matrix.
\end{proof}
Proposition \ref{prop:M-MatrixEntries} also demonstrates how the $M$-matrix is parametrised by $\qm$, and so we shall denote it by $M_{\qm}$ henceforth.
The dependence of $M_\qm$ on $\qm$ is due to our decision to specify our singular structure as an embedded, periodic metric graph and then apply the Gelfand transform (see section \ref{ssec:MMatrix}).
In the following section, we continue our analysis of this family of $M$-matrices and how it can be used to recover the eigenvalues of \eqref{eq:SingularWaveEqnQGProblem}.

\subsection{Consequences of proposition \ref{prop:M-MatrixEntries}} \label{ssec:MMatrixConsequences}
Whilst proposition \ref{prop:M-MatrixEntries} provides an explicit form for the entries of the $M$-matrix,  it is not the most convenient when looking for a method for determining the spectrum of \eqref{eq:SingularWaveEqnQGProblem}.
Proposition \ref{prop:M-MatrixEntries} does however show that $M_\qm$ is meromorphic, and thus has the following decomposition:
\begin{cory} \label{cory:M-MatrixEntriesNoPoles}
	Let $G^{(1)}_\qm\bracs{\omega}$ have entries defined by
	\begin{align*}
		\bracs{G^{(1)}_\qm}_{jk} &= 
		\begin{cases}
			\!\begin{aligned}
				&0,
			\end{aligned}			
			& j \not\con k, \\
			\!\begin{aligned}
				&\sum_{j\conLeft k} \bracs{ \e^{\rmi\qm_{jk}l_{jk}} \prod_{v_l\in\vertSet}\prod_{\substack{ l\conLeft m \\ \bracs{l,m} \neq \bracs{j,k} }}\sin\bracs{l_{lm}\omega} }
				\\ &\quad + \sum_{j\conRight k} \bracs{ \e^{-\rmi\qm_{kj}l_{kj}} \prod_{v_l\in\vertSet}\prod_{\substack{l\conLeft m \\ \bracs{l,m} \neq \bracs{k,j} }}\sin\bracs{l_{lm}\omega} },
			\end{aligned}
			& j\neq k, \ j\con k, \\
			\!\begin{aligned}
				&- \sum_{\substack{j\con l \\ j\neq l}} \bracs{ \cos\bracs{l_{jl}\omega}\prod_{v_m\in\vertSet}\prod_{\substack{ m\conLeft n \\ \bracs{m,n}\neq\bracs{j,l} }}\sin\bracs{l_{mn}\omega} }
				\\ &\quad - 2\sum_{j\conLeft j} \bracs{ \sqbracs{ \prod_{v_l\in\vertSet}\prod_{\substack{l\conLeft m \\ \bracs{l,m}\neq\bracs{j,j} }}\sin\bracs{l_{lm}\omega} }\bigl[ \cos\bracs{l_{jj}\omega} - \cos\bracs{\qm_{jj}l_{jj}} \bigr] },
			\end{aligned}
			& j=k,
		\end{cases}
	\end{align*}
	and set
	\begin{align*}
		G^{(2)}\bracs{\omega} &= \prod_{v_j\in\vertSet} \prod_{j\conLeft k}\sin\bracs{l_{jk}\omega}.
	\end{align*}
	Further define
	\begin{align*}
		H^{(1)}_{\qm}(z) &:= 
		\begin{cases} 
			\omega G_\qm^{(1)}(\omega), & \abs{\edgeSet} \text{ is even}, \\
			G_\qm^{(1)}(\omega), & \abs{\edgeSet} \text{ is odd},
		\end{cases} \\
		H^{(2)}(z) &:=
		\begin{cases}
			G^{(2)}(\omega), & \abs{\edgeSet} \text{ is even}, \\
			\omega^{-1} G^{(2)}(\omega), & \abs{\edgeSet} \text{ is odd}.
		\end{cases}
	\end{align*}
	Then the functions $H^{(1)}_{\qm}(z)$ and $H^{(2)}(z)$ are analytic in $z:=\omega^2$ and we have
	\begin{align*}
		M_\qm\bracs{z} &= \bracs{ H^{(2)}\bracs{z} }^{-1} H^{(1)}_\qm\bracs{z}.
	\end{align*}
\end{cory}
The product notation should be understood analogously to the summation notation over $j\con k$ introduced in section \ref{sec:QuantumGraphs}.
The zeros of $H^{(2)}$ exactly coincide with the poles of $M_\qm$, both $H^{(1)}_\qm$ and $H^{(2)}$ are analytic, and the matrix $H^{(1)}_\qm$ even has its entry at position $jk$ bounded (uniformly in $\omega$) by the number of (direct) connections between $v_j$ and $v_k$.

Recall that (section \ref{ssec:MMatrix}) we need to determine those $z$ for which the matrix $M_\qm(z)-B(z)$ has at least one zero eigenvalue, where we have set $B(z) = -z\alpha$.
Now let $\beta_j^{\qm}\bracs{z}, j\in\clbracs{1,...,\abs{\vertSet}}$ denote the eigenvalue branches of the matrix $M_\qm(z)-B(z)$.
Also set 
\begin{align*}
	\mathfrak{M}_\qm(z) = H^{(1)}_\qm(z) - H^{(2)}(z)B(z),
\end{align*}
and let $\widetilde{\beta}_j^{\qm}\bracs{z}, j\in\clbracs{1,...,\abs{\vertSet}}$ denote the eigenvalue branches of $\mathfrak{M}_\qm$.
With the poles removed, and the entries of $\mathfrak{M}_\qm$ being continuous (even smooth) functions of $\omega$ and $\qm$, the $\widetilde{\beta}_j^{\qm}$ are also continuous with respect to $\omega$ and $\qm$.
For each fixed $\qm$, the matrix $\mathfrak{M}_\qm$ is analytic and so has at least one zero eigenvalue at those $z$ for which there exists a $w\in\complex^{\abs{\vertSet}}\setminus\clbracs{0}$ such that
\begin{align} \label{eq:QGGenEvalSolveNoPoles}
	\mathfrak{M}_\qm\bracs{z}w = 0.
\end{align}
We could also chose to determine these $z$ via solution to 
\begin{align} \label{eq:QGDetSolveCondition}
	\det\mathfrak{M}_\qm\bracs{z} &= 0,
\end{align}
the merits of each approach (via \eqref{eq:QGGenEvalSolveNoPoles} or \eqref{eq:QGDetSolveCondition}) we will discuss in section \ref{ssec:ApproachConsiderations}.
If $z_0$ solves \eqref{eq:QGGenEvalSolveNoPoles} (or equivalently \eqref{eq:QGDetSolveCondition}), then $M_{\qm}\bracs{z_0}-B\bracs{z_0}$ has a zero eigenvalue when
\begin{align} \label{eq:EigenvalueBranchLimit}
	\lim_{z\rightarrow z_0} \beta_j^{\qm}\bracs{z} = \lim_{z\rightarrow z_0} \bracs{ H^{(2)}\bracs{z} }^{-1} \widetilde{\beta}_j^{\qm}\bracs{z} = 0
\end{align}
for at least one $j$ with $\widetilde{\beta}_j^{\qm}\bracs{z_0}=0$.
Checking the limit in \eqref{eq:EigenvalueBranchLimit} is not necessary for all solutions $z_0$ to \eqref{eq:QGDetSolveCondition}; indeed it is only necessary when $H^{(2)}\bracs{z_0} = 0$, which by corollary \ref{cory:M-MatrixEntriesNoPoles} occurs when
\begin{align} \label{eq:H2ZerosEqn}
	z_0 = \bracs{ \frac{n\pi}{l_{jk}} }^2, \quad j\conLeft k, \ n\in\naturals_{0},
\end{align}
which is a countable set of isolated points.
Furthermore the limit \eqref{eq:H2ZerosEqn} is essentially a residue, so one also has the possibility of using numerical methods derived from techniques in complex analysis to evaluate the limit.
As we will discuss in section \ref{ssec:ApproachConsiderations}, one may be able to circumvent checking the limit \eqref{eq:EigenvalueBranchLimit} by exploiting \eqref{eq:TP-DenseQMSubsetSuffices}.
Considerations concerning which of the two equations \eqref{eq:QGGenEvalSolveNoPoles} or \eqref{eq:QGDetSolveCondition} should be used for determining the spectrum $\sigma_\qm$ are also discussed in section \ref{ssec:ApproachConsiderations}.
In any event, \eqref{eq:SingularScalarWaveEqn} has now been reduced to a more accessible (family of) matrix-eigenvalue problems for $\mathfrak{M}_\qm$.

\subsection{Artificial vertices and splitting edges} \label{ssec:ArtificialVertices}
As noted in section section \ref{ssec:MMatrix}, it is required that the underlying graph $\graph$ contains no looping edges and has all edge-lengths pairwise irrationally-related\footnote{More precisely, it was noted that the operator we wish to study is required to be simple, which in the context of quantum graphs is equivalent to these conditions \cite{ashurova2014simplicity}.}.
Failure to ensure that this condition is met results in the ``loss" of certain eigenvalues when using the $M$-matrix to determine the spectrum of \eqref{eq:SingularWaveEqnQGProblem} --- these are highlighted explicitly in section \ref{ssec:Example1DLoop}.
Of course, the graphs motivated by physical applications generally do not adhere to these restrictions --- typically being highly symmetric or and potentially consisting of loops.
It is thus necessary to introduce \emph{artificial vertices} (or \emph{dummy vertices}) to split the edges of the original graph, removing any loops and ensuring all (new) edges have irrationally-related lengths.
Here it is relevant to highlight the discussions in \cite[examples 1.4.3 and 2.1.12]{berkolaiko2013introduction}; which consider a star-graph with Neumann vertex conditions, and demonstrate that the edge lengths being pairwise irrationally-related is also sufficient for all the eigenvalues to have multiplicity one.
The result \cite[theorem 3.7.1]{berkolaiko2013introduction} handles more general graph settings, and using techniques surrounding so-called bond scattering matrices, culminates with \cite[theorem 3.7.1]{berkolaiko2013introduction} relating the multiplicity of the eigenvalues to the multiplicity of the roots of the so-called \emph{secular equation}.
A discussion is provided in \cite[section 3.5]{berkolaiko2013introduction} that relates this framework with the to the Dirichlet-to-Neumann map, and hence our approach via \eqref{eq:QGGenEvalSolveNoPoles} and \eqref{eq:QGDetSolveCondition}.

Introducing an artificial vertex to split an edge is as intuitive as it sounds.
Suppose $\graph=\bracs{\vertSet, \edgeSet}$ and one wishes to split the edge $I_{jk}$ (where it may be the case that $j=k$ and we have a loop).
Place a vertex $v_l$ at some point along the edge $I_{jk}$, and replace $I_{jk}$ with the edges $I_{jl}$ and $I_{lk}$, to obtain a new graph $\graph^*$.
The total length of the edges must be preserved, so $l_{jk} = l_{jl} + l_{lk}$, but the lengths of the new edges should be chosen bearing in mind the aforementioned requirements.
Furthermore, a zero coupling constant should be placed at the artificial vertex $v_l$ --- this ensures matching of the solution $u$ and its derivative at the artificial vertex, as would have been the case along the original edge if it had not been split.
The quasi-momentum parameters should also satisfy $\qm_{jl}=\qm_{lk}=\qm_{jk}$ (although this is a by-product of having straight edges, see assumption \ref{ass:MeasTheoryProblemSetup}), and the direction of the original edge should be preserved.
This ensures (via \eqref{eq:SingularWaveEqnQGProblem-2} and \eqref{eq:SingularWaveEqnQGProblem-3}) that any eigenvalues $\omega^2$ of \eqref{eq:SingularWaveEqnQGProblem} on $\graph^*$ are also eigenvalues of \eqref{eq:SingularWaveEqnQGProblem} on $\graph$, with the eigenfunction $u^{(jk)}$ being related to $u^{(jl)}$ and $u^{(lk)}$ in the obvious manner.
This process can be executed iteratively, splitting edges to remove rational-relations between edge lengths and any loops.
Doing so means that any graph representing a singular-structure can now be treated in the manner described in section \ref{ssec:MMatrixConsequences}.

We highlight here that there are a number of considerations to make regarding the design of a \emph{general algorithm} to create a graph with pairwise irrationally-related edge lengths, from a graph without this quality.
Design of such an algorithm lies outside the objectives of this thesis, however we hope to provide readers interested in developing such a proceedure with a helpful starting point for such considerations.
In the event that one begins with a graph with $L$ edges all of which are \emph{all} pairwise-rationally related, then one has the following proceedural method for creating a graph with $2L$ edges of pairwise irrationally-related lengths:
\begin{enumerate}
   \item Split the edge $I_1$ of length $l_1$ into two edges of lengths $\frac{l_1}{\sqrt{2}}$ and $l_1\bracs{1 - \frac{1}{\sqrt{2}}}$.
   These edges now have lengths that are irrationally related to each other, and all other edges in the graph.
   \item Split the edge $I_2$ of length $l_2$ into two edges of lengths $\frac{l_2}{\sqrt{3}}$ and $l_2\bracs{1-\frac{1}{\sqrt{3}}}$.
   These edges now have lengths that are irrationally related to each other, all edges $I_n$, $2<n<L$, and the two new edges created in step 1.
   \item Proceeding iteratively, one splits the edge $I_n$ of length $l_n$ into two edges of length $\frac{l_n}{\sqrt{p_n}}$ and $l_n\bracs{1-\frac{1}{\sqrt{p_n}}}$ where $p_n$ is the $n^{\text{th}}$ prime number.   
\end{enumerate}
Here we have are dependent on the following result:
\begin{lemma} \label{lem:NumTheory-GraphSplitAlgorithm}
    Suppose that $a,b>0$ and there exists $q\in\rationals$ such that $\frac{a}{b}=q$.
    Let $p_1$ and $p_2$ be distinct prime numbers. 
    Then the values
    \begin{align} \label{eq:NumTheory-PairsWithoutAssumption}
        \frac{a}{\sqrt{p_1}}, \quad
        a\bracs{1-\frac{1}{\sqrt{p_1}}}, \quad
        b,    
    \end{align}
    are pairwise-irrationally related.
    If additionally $\sqrt{\frac{p_1}{p_2}}\frac{\sqrt{p_2}-1}{\sqrt{p_1}-1}$ is irrational\footnote{It is not known to the author whether this condition is always satisfied for primes $p_1$ and $p_2$, so the result may be true without the need to add this additional assumption.}, the values
    \begin{align} \label{eq:NumTheory-PairsWithAssumption}
        \frac{a}{\sqrt{p_1}}, \quad
        a\bracs{1-\frac{1}{\sqrt{p_1}}}, \quad
        \frac{b}{\sqrt{p_2}}, \quad
        b\bracs{1-\frac{1}{\sqrt{p_2}}},
    \end{align}
    are pairwise-irrationally related.
\end{lemma}
\begin{proof}
    This proof is simply a case of comparing the quotients of the possible pairs in \eqref{eq:NumTheory-PairsWithoutAssumption} and \eqref{eq:NumTheory-PairsWithAssumption}, and realising they are irrational.
\end{proof}
For the purposes of completing the proceedure listed above, it would be sufficient to demonstrate the weaker conclusion that there exist at least $L$ such pairs of primes --- because after $L$ steps we would be left with $2L$ edges of irrationally-related lengths.
Things are further complicated however if the original graph contains a mixture of rationally and irrationally related edge lengths, as one might now split an edge in the above manner only to find it then rationally relates to another edge that it previously did not.
A stronger version of lemma \ref{lem:NumTheory-GraphSplitAlgorithm} would be needed in this case (dropping the assumption that $a$ and $b$ are rationally related); or one would have to produce a less-n\"{i}ave approach to the order in which edges are split, as it may no longer be sufficient to simply use reciprocal roots of prime numbers to ensure edges are irrationally-related.

\subsection{Considerations for the approach to solving \eqref{eq:QGGenEvalSolveNoPoles} or \eqref{eq:QGDetSolveCondition}} \label{ssec:ApproachConsiderations}
In this section we briefly discuss some considerations for recovering the spectrum $\sigma\bracs{-\laplacian_{\upsilon}}=:\sigma$, through determination the spectra $\sigma_{\qm}:=\sigma\bracs{-\laplacian_{\dddmes}^{\qm}}$ via \eqref{eq:QGGenEvalSolveNoPoles} or \eqref{eq:QGDetSolveCondition}.
%Recall that our use of the Gelfand transform informs us that $\sigma = \bigcup_{\qm}\sigma_{\qm}$.
We take as given that one has to hand an appropriate numerical scheme for handling the generalised eigenvalue problem \eqref{eq:QGGenEvalSolveNoPoles} (a good introduction to which can be found in \cite{guttel2017nonlinear}), and so do not delve into the details of how such an algorithm would operate.
However it is worth highlighting that $\mathfrak{M}_\qm$ is Hermitian\footnote{Our requirement that $\alpha_j>0$ is implicitly used here --- in general $\mathfrak{M}_{\qm}$ is Hermitian provided $\alpha_j\in\reals$. The $M$-matrix $M_{\qm}$ is Hermitian regardless of the values of the coupling constants.}, from which most numerical schemes benefit.
The element-wise derivative with respect to $\omega$ is also easily computed (this derivative is required for generalised eigenvalue solvers based on Newton's method), although the resulting expressions are often cumbersome.
If we are intent on working directly with the determinant, then we can use corollary \ref{cory:M-MatrixEntriesNoPoles} to prove the following result about its form.
\begin{prop} \label{prop:MMatrixDetForm}
	Given a graph $\graph = \bracs{\vertSet, \edgeSet}$ containing no loops and whose edge-lengths are pairwise irrationally related, there exists a function $F\bracs{\qm,\omega}$ that is analytic in both its arguments, such that
	\begin{align} \label{eq:MMatrixDetForm}
		\det\mathfrak{M}_\qm\bracs{\omega^2} = \bracs{ \omega H^{(2)}\bracs{\omega^2} }^{\abs{\vertSet}-2} F\bracs{\qm,\omega}.
	\end{align}
\end{prop}
A proof of this result can be found in section \ref{sec:ProofOfProp}, but is just book-keeping the number of times a given factor can appear in the expression for the determinant.
Note that a graph with only one vertex can \emph{only} have looping edges, which must be broken via an artificial vertex to produce a graph with (at least two) vertices.
We can then use proposition \ref{prop:MMatrixDetForm} to prove the following result.
\begin{cory} \label{cory:ScalarSetInclusions}
	Define the sets
	\begin{align*}
		F_0^{\qm} := \clbracs{\omega \setVert F\bracs{\qm, \omega}=0},
		\qquad
		F_0 := \bigcup_{\qm\in B}F_0^{\qm},
		\qquad
		H_0 := \clbracs{\omega \setVert H^{(2)}\bracs{\omega^2}=0}.
	\end{align*}		
	Then it holds that
	\begin{enumerate}[(i)]
		\item $F_0\setminus H_0 = \sigma\setminus H_0$,
		\item $\overline{F_0\setminus H_0} \subset \sigma$.
	\end{enumerate}
\end{cory}
\begin{proof}
	\begin{enumerate}[(i)]
		\item This follows from the relation $\widetilde{\beta}_j^{\qm} = H^{(2)}\beta_j^\qm$ between the eigenvalue branches $\widetilde{\beta}_j^{\qm}$ of $\mathfrak{M}_{\qm}$ and $\beta_j^{\qm}$ of $M_{\qm}-B$.
		If $\omega_0\in F_0\setminus H_0$, there exists some $\qm\in B$ such that $F\bracs{\qm,\omega_0}=0$, and so proposition \ref{prop:MMatrixDetForm} implies that $\det\mathfrak{M}_\qm\bracs{\omega_0^2}=0$.
		So there is in particular one eigenvalue branch $\widetilde{\beta}_j^{\qm}$ with $\widetilde{\beta}_j^{\qm}\bracs{\omega_0^2}=0$, and since $\omega_0\not\in H_0$ we have $\beta_j^\qm\bracs{\omega_0^2}=0$ too, so $\omega_0\in\sigma$.
		Conversely, if $\omega_0\in \sigma\setminus H_0$, there exists some $\qm\in B$ and an eigenvalue branch with $\beta_j^\qm\bracs{\omega_0^2}=0$.
		Since $\omega_0\not\in H_0$, $\widetilde{\beta}_j^{\qm}\bracs{\omega_0^2}=0$ too, so $\det\mathfrak{M}_{\qm}\bracs{\omega_0^2}=0$, and thus by proposition \ref{prop:MMatrixDetForm} so is $F\bracs{\qm,\omega_0}$.
		\item By (i), $F_0\setminus H_0 \subset \sigma$.
		Therefore, $\overline{F_0\setminus H_0}\subset\overline{\sigma}=\sigma$, since the spectrum $\sigma$ is closed.
	\end{enumerate}
\end{proof}
Corollary \ref{cory:M-MatrixEntriesNoPoles} demonstrates that the majority of the spectrum can thus be found through examination of the function $F$.
The preimage $F^{-1}\bracs{\clbracs{0}}$ coincides with $\sigma$ up to the roots of $H^{(2)}\bracs{\omega^2}$ --- in particular, it dictates the spectral bands.
This also allows us to avoid manually checking the limit \eqref{eq:EigenvalueBranchLimit} at roots of $H^{(2)}\bracs{\omega^2}$ within the spectral bands --- such values are necessarily within the closure of $F_0\setminus H_0$.
All that remains are then those $\omega_0\in F_0\setminus H_0$ that are not within $\overline{F_0\setminus H_0}$ --- a set of isolated points along the positive real line.
Our example in section \ref{ssec:ExampleCrossInPlane} illustrates that the inclusion in (ii) can indeed be strict.

Finding $\sigma$ (up to checking isolated roots of $H^{(2)}$) now becomes a question of obtaining $F_0$ efficiently.
There is always brute force; computing $F_0^{\qm}$ for each $\qm$ (or for each $\qm$ in a suitable mesh if working numerically), and then taking the union over $\qm$ to obtain $F_0$.
Alternatives are available if $F$ admits additional properties, however these will rely on our ability to find an analytic expression for $F$ (one is obtained in the proof of proposition \ref{prop:MMatrixDetForm}, however it is rather cumbersome to use).
The ideal case being when we can write $F\bracs{\qm,\omega} = F_1\bracs{\qm} - F_2\bracs{\omega}$ for continuous $F_1$ and $F_2$, then \eqref{eq:QGDetSolveCondition} implies $F_0$ can be found simply by examining
\begin{align*}
	\min_{\qm}\clbracs{F_1(\qm)} \leq F_2\bracs{\omega} \leq \max_{\qm}\clbracs{F_1(\qm)},
\end{align*} 
although such a separation of $F$ will not generally be possible.
Of course, if an analytic expression for $F$ can be obtained, we can always then employ a root-finding algorithm to determine the set $F_0$.
Further to this, (the proof of) proposition \ref{prop:MMatrixDetForm} informs us that (for each fixed $\qm$) such an expression for $F$ will be solely in terms of $\omega^2$, sine and cosine functions of $\omega$.

We should not ignore the elephant in the room concerning \emph{how practical} it is to obtain, and work with, the matrix $\mathfrak{M}_\qm$ and the function $F$ in the first place.
Corollary \ref{cory:M-MatrixEntriesNoPoles} affords some insight into the sparsity of $\mathfrak{M}_{\qm}$; for every pair of vertices $v_j$ and $v_k$ that are directly connected by (at least one) edge, there are two non-zero off-diagonal entries introduced to $\mathfrak{M}_{\qm}$, whilst the diagonal entries are always not identically zero (for a connected, periodic graph).
For a given number of vertices in a connected periodic graph without loops, we thus minimise the number of non-zero off-diagonal entries when the graph is a chain --- each vertex $v_j$ has precisely two direct connections to $v_{j-1}$ and $v_{j+1}$.
The ratio $\frac{\abs{\edgeSet}}{\abs{\vertSet}}$ provides a good indicator of how ``close" to a chain graph $\graph$ is (and consequentially, how close to a diagonal matrix $\mathfrak{M}_\qm$ is) --- if $\frac{\abs{\edgeSet}}{\abs{\vertSet}} = 1$, the graph is necessarily a chain.
The opposite extreme $\frac{\abs{\edgeSet}}{\abs{\vertSet}} = \recip{2}(\abs{\vertSet}-1)$ corresponds to a fully connected graph and thus dense $\mathfrak{M}_\qm$.
For graphs with $\frac{\abs{\edgeSet}}{\abs{\vertSet}} \approx 1$, $\mathfrak{M}_{\qm}$ is relatively sparse and computing $F$ is more feasible, although still difficult analytically if $\abs{\vertSet}$ is large.
Therefore for denser $\mathfrak{M}_\qm$ and larger (in the sense of number of edges) graphs, one begins to lean toward numerical schemes based on \eqref{eq:QGGenEvalSolveNoPoles}.

Another topical question worth addressing at this point is whether, given the expectation that $\sigma$ has a band-gap structure, an alternative to finding all $\omega\in F_0$ is to only compute the spectral edges and then reconstruct $F_0$ from them.
It is known for (second order) periodic PDE problems that the edges of the spectral bands occur at the symmetry values of the quasi-momentum --- those values of $\qm$ which correspond to the periodic and anti-periodic problems (in each axis direction) on the unit cell.
If the above statement were true for the problem \eqref{eq:SingularWaveEqnQGProblem}, then the dimensionality of the problem of computing $F_0$ (hence $\sigma$) could be reliably reduced to determining $F_0^\qm$ for the aforementioned symmetry values of $\qm$.
However as discussed in \cite[Chapter 4.6]{berkolaiko2013introduction}, whilst this has been experimentally observed to be true for quantum graph problems motivated by physical structures, it is in fact untrue in general.
This extends to \eqref{eq:SingularWaveEqnQGProblem}, however \cite[Chapter 4.6]{berkolaiko2013introduction} remarks that adopting the approach of assuming the spectral edges lie at the symmetry points of the quasi-momentum does not often lead to errors in practice.
It is unclear why this is the case; the current hypothesis is that the underlying (period) graph needs to be made highly asymmetric to move the spectral edges away from the symmetry points of the quasi-momentum, and since most physical structures of interest display symmetries in their unit cells, the assumption ``holds in practice".
In our examples in section \ref{sec:ScalarExamples}, we will also see that preserving some underlying symmetries in our graphs indeed results in the symmetry values of the quasi-momentum being the boundaries of the spectral gaps.